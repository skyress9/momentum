(()=>{"use strict";const e={en:["Good night","Good morning","Good afternoon","Good evening"],ru:["Спокойной ночи","Доброе утро","Добрый день","Добрый вечер"]},t={en:["Wind speed","Humidity"],ru:["Скорость ветра","Влажность"]},n={en:["your name","City"],ru:["Ваше имя","Город"]},o={en:["Minsk"],ru:["Минск"]},r={en:["en-US",{day:"numeric",month:"long",year:"numeric"}],ru:["ru-RU",{weekday:"long",month:"long",day:"numeric"}]},a=document.querySelector(".weather-icon"),c=document.querySelector(".temperature"),u=document.querySelector(".weather-description"),i=document.querySelector(".wind"),s=document.querySelector(".humidity"),l=document.querySelector(".weather-error"),d=document.querySelector(".city");async function m(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${d.value}&lang=${L}&appid=5c61801844486eaf158f77f25ecbdb46&units=metric`,n=await fetch(e),o=await n.json();if(l.textContent="",!n.ok)return a.className="",c.textContent="",u.textContent="",i.textContent="",s.textContent="",l.textContent=`Error: "${d.value}" not found`;a.className="weather-icon owf",a.classList.add(`owf-${o.weather[0].id}`),c.textContent=`${Math.round(o.main.temp)} °C`,u.textContent=o.weather[0].description,i.textContent=`${t[L][0]}: ${Math.round(o.wind.speed)} m/s`,s.textContent=`${t[L][1]}: ${o.main.humidity}%`}function g(){k.placeholder=n[L][0],d.placeholder=n[L][1],localStorage.getItem("name")&&(k.value=localStorage.getItem("name")),localStorage.getItem("weather")?d.value=localStorage.getItem("weather"):d.value=o[L][0],m()}d.addEventListener("change",m),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",k.value),localStorage.setItem("weather",d.value)})),window.addEventListener("load",g);const h=document.querySelector(".quote"),y=document.querySelector(".author");async function p(){const e=await fetch("json/data.json"),t=await e.json(),n=Math.round(Math.random()*(t.length-1));h.textContent=t[n][L],y.textContent=t[n].author}document.querySelector(".change-quote").addEventListener("click",p),p();const v=document.querySelector(".settings-btn"),S=document.querySelector(".settings"),f=document.querySelector(".select-language"),w=document.querySelector(".select-api"),q=(document.querySelector("#time"),{language:"en",photoSource:"github",blocks:["time","date","greeting","quote","weather","audio","todolist"]});let L="en";v.addEventListener("click",(function(){S.classList.toggle("active"),v.classList.toggle("active")})),f.addEventListener("change",(()=>{q.language=f.value,L=q.language,$(),M(),m(),g(),p()})),w.addEventListener("change",(()=>{q.photoSource=w.value}));const b=document.querySelector(".greeting"),k=document.querySelector(".name");function E(t="en"){const n=(new Date).getHours();return n<6?e[t][0]:n<12?e[t][1]:n<18?e[t][2]:e[t][3]}function $(){const e="en"==L?E():E("ru");b.textContent=e+","}const x=document.querySelector(".time"),C=document.querySelector(".date");function M(){const e=(new Date).toLocaleTimeString();x.textContent=e,function(){const e=(new Date).toLocaleDateString(r[L][0],r[L][1]);C.textContent=e}(),$(),setTimeout(M,1e3)}let j;const I=document.querySelector(".slide-next"),T=document.querySelector(".slide-prev");async function F(e){const t=E().slice(5),n=String(j).padStart(2,"0"),o=new Image;"github"==e?o.src=`https://raw.githubusercontent.com/skyress9/stage1-tasks/assets/images/${t}/${n}.jpg`:"unsplash"==e?o.src=await async function(e){const t=`https://api.unsplash.com/photos/random?orientation=landscape&query=${e}&client_id=u5KroVZF4HetYqnM33aj2bgnXQP9VT7GLPqtkZBx3PU`,n=await fetch(t);return(await n.json()).urls.regular}(t):"flickr"==e&&(o.src=await async function(e){const t=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=a76cd58c2fa3e961eba9cf609c61f0c5&tags=${e},nature&extras=url_l&format=json&nojsoncallback=1`,n=await fetch(t);return(await n.json()).photos.photo[Math.ceil(99*Math.random())].url_l}(t)),o.addEventListener("load",(()=>document.querySelector("body").style.backgroundImage=`url(${o.src})`))}j=Math.ceil(20*Math.random()),F(q.photoSource),I.addEventListener("click",(function(){20==j?j=1:j++,F(q.photoSource)})),T.addEventListener("click",(function(){1==j?j=20:j--,F(q.photoSource)}));const G=[{title:"Aqua Caelestis",src:"assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Ennio Morricone",src:"assets/sounds/Ennio Morricone.mp3",duration:"03:50"},{title:"Summer Wind",src:"assets/sounds/Summer Wind.mp3",duration:"03:50"}],A=document.querySelector(".play"),D=document.querySelector(".play-next"),_=document.querySelector(".play-prev"),H=document.querySelector(".input-progress"),P=document.querySelector(".input-volume"),R=document.querySelector(".volume-mute"),U=document.querySelector(".play-duration"),W=document.querySelector(".play-track");let Y=!1,N=0;const V=new Audio;function Z(){const e=document.querySelectorAll(".play-item");e.forEach((e=>e.classList.remove("item-active"))),e[N].classList.add("item-active")}function B(){Y?(Y=!1,V.pause()):(Y=!0,V.src=G[N].src,V.currentTime=0,V.play()),W.textContent=G[N].title,Z(),1==Y?A.classList.add("pause"):A.classList.remove("pause")}function K(){N==G.length-1?N=0:N++,Y=!1,B()}function Q(e){const t=Math.floor(e/60)||0,n=Math.floor(e-60*t)||0;return`${t}:${(n<10?"0":"")+n}`}function X(){P.value>0&&R.classList.remove("mute"),V.volume=P.value/100,P.style.background=`linear-gradient(to right, rgb(255, 255, 255) 0%, rgb(255, 255, 255) ${P.value}%, rgba(196, 196, 196, 0.411) ${P.value}%, rgba(196, 196, 196, 0.411) 100%)`}H.addEventListener("input",(function(){V.currentTime=isFinite(V.duration)?H.value/100*V.duration:V.currentTime=1,H.style.background=`linear-gradient(to right, rgb(255, 255, 255) 0%, rgb(255, 255, 255) ${H.value}%, rgba(196, 196, 196, 0.411) ${H.value}%, rgba(196, 196, 196, 0.411) 100%)`})),P.addEventListener("input",X),R.addEventListener("click",(function(){R.classList.contains("mute")?P.value=50:P.value=0,R.classList.toggle("mute"),X()})),A.addEventListener("click",B),D.addEventListener("click",K),_.addEventListener("click",(function(){0==N?N=G.length-1:N--,Y=!1,B()})),V.addEventListener("timeupdate",(function(){let e=Math.floor(V.currentTime/V.duration*100);e=isFinite(e)?e:e=1,H.style.background=`linear-gradient(to right, rgb(255, 255, 255) 0%, rgb(255, 255, 255) ${e}%, rgba(196, 196, 196, 0.411) ${e}%, rgba(196, 196, 196, 0.411) 100%)`,H.value=e,U.textContent=`${Q(V.currentTime)} / ${Q(V.duration)}`})),V.addEventListener("ended",K),G.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,document.querySelector(".play-list").append(t)})),Z(),M()})();